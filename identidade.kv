# -*- coding: utf-8 -*-

Manager:
    Menu:
        name: 'menu'
    Game:
        name: 'game'
    GameOver:
        name: 'game_over'
    Pause:
        name: 'pause'
    Setting:
        name: 'setting'
    Tutorial:
        name: 'tutorial'

<Menu>:
    MDBoxLayout:
        orientation: 'vertical'
        Widget
        MDLabel:
            text: 'Identidade'
            halign: 'center'
            font_style: 'H2'
            theme_text_color: "Custom"
            text_color: app.theme_cls.primary_color
        AnchorLayout:
            anchor_x: 'center'
            anchor_y: 'center'
            MDRectangleFlatButton:
                text: 'Começar'
                on_release: app.root.current = 'game'
        AnchorLayout:
            anchor_x: 'center'
            anchor_y: 'center'
            MDRectangleFlatButton:
                text: 'Como Jogar?'
                on_release: app.root.current = 'tutorial'
        AnchorLayout:
            anchor_x: 'center'
            anchor_y: 'center'
            MDRectangleFlatButton:
                text: 'Configurações'
                on_release: app.root.current = 'setting'

<Player>:
    canvas:
        Color:
            rgba: app.theme_cls.primary_color
        Ellipse:
            size: self.size
            pos: self.pos

<Game>:
    spf: 1 / app.settings['fps']
    height_gap: self.height / 5
    game_height: self.height_gap + self.height
    width_gap: self.width / 5
    game_width: self.width_gap + self.width
    MDBoxLayout:
        orientation: 'vertical'
        Widget
        MDBoxLayout:
            orientation: 'vertical'
            MDLabel:
                text: 'Placar: ' + str(int(root.score))
                halign: 'center'
                font_style: 'H3'
            MDLabel:
                text: 'Nível: ' + str(int(root.level))
                halign: 'center'
                font_style: 'Subtitle1'
        Widget:
            size_hint_y: 3
    MDFloatLayout:
        Player:
            size_hint: None, None
            size_parameter: min(root.height, root.width) / 15
            size: self.size_parameter, self.size_parameter
            x: root.width * 0.9
            y: root.height / 20

<GameOver>:
    MDBoxLayout:
        orientation: 'vertical'
        Widget
        MDBoxLayout:
            orientation: 'vertical'
            MDLabel:
                text: 'Fim de Jogo'
                halign: 'center'
                font_style: 'H2'
                theme_text_color: "Custom"
                text_color: app.theme_cls.accent_color
            MDLabel:
                text: 'Maior pontuação: ' + str(int(app.settings['high_score']))
                halign: 'center'
                font_style: 'Subtitle1'
                theme_text_color: "Custom"
                text_color: app.theme_cls.accent_color
        AnchorLayout:
            anchor_x: 'center'
            anchor_y: 'center'
            MDRectangleFlatButton:
                text: 'Tentar de novo'
                on_release: app.root.current = 'game'
                text_color: app.theme_cls.accent_color
                line_color: app.theme_cls.accent_color
        AnchorLayout:
            anchor_x: 'center'
            anchor_y: 'center'
            MDRectangleFlatButton:
                text: 'Menu'
                on_release: app.root.current = 'menu'
                text_color: app.theme_cls.accent_color
                line_color: app.theme_cls.accent_color
        Widget

<Pause>:
    MDBoxLayout:
        orientation: 'vertical'
        Widget
        MDBoxLayout:
            orientation: 'vertical'
            MDLabel:
                text: 'Placar: ' + str(int(root.game_score))
                halign: 'center'
                font_style: 'H2'
                theme_text_color: "Custom"
                text_color: app.theme_cls.primary_color
            MDLabel:
                text: 'Nível: ' + str(int(root.game_level))
                halign: 'center'
                font_style: 'Subtitle1'
                theme_text_color: "Custom"
                text_color: app.theme_cls.primary_color
        AnchorLayout:
            anchor_x: 'center'
            anchor_y: 'center'
            MDRectangleFlatButton:
                text: 'Continuar'
                on_release: app.root.current = 'game'
        AnchorLayout:
            anchor_x: 'center'
            anchor_y: 'center'
            MDRectangleFlatButton:
                text: 'Menu'
                on_release: app.root.current = 'menu'
        Widget

<Setting>:
    MDBoxLayout:
        orientation: 'vertical'
        MDBoxLayout:
            MDLabel:
                text: 'Volume'
                halign: 'center'
                size_hint_x: 1/3
            MDSlider:
                value: app.settings['volume']
                on_value:
                    app.settings['volume'] = self.value
                    app.music.volume = self.value / 100
        MDBoxLayout:
            MDLabel:
                text: 'FPS'
                halign: 'center'
                size_hint_x: 1/3
            MDSlider:
                value: app.settings['fps']
                on_value: app.settings['fps'] = self.value
        MDBoxLayout:
            AnchorLayout:
                anchor_x: 'center'
                anchor_y: 'center'
                MDRectangleFlatButton:
                    text: 'Salvar'
                    on_release: app.save()
            AnchorLayout:
                anchor_x: 'center'
                anchor_y: 'center'
                MDRectangleFlatButton:
                    text: 'Voltar ao Menu'
                    on_release: app.root.current = 'menu'

<Obstacle>
    color: app.theme_cls.accent_color
    canvas:
        Color:
            rgba: root.color or app.theme_cls.accent_color
        Rectangle:
            size: self.size
            pos: self.pos
    size_hint: None, None
